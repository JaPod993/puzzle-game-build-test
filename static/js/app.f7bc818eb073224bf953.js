webpackJsonp([1],{"1GO+":function(t,e,r){"use strict";var s={popupVisibility:!0,userName:""},i={getLoginPopupState:function(t){return t.popupVisibility},getUserName:function(t){return t.userName}},n={showPopup:function(t){t.popupVisibility=!0},closePopup:function(t){t.popupVisibility=!1},togglePopup:function(t){t.popupVisibility=!t.popupVisibility},updateUserName:function(t,e){t.userName=e}},o={showPopup:function(t){(0,t.commit)("showPopup")},closePopup:function(t){(0,t.commit)("closePopup")},togglePopup:function(t){(0,t.commit)("togglePopup")},updateUserName:function(t,e){(0,t.commit)("updateUserName",e)}};e.a={state:s,mutations:n,actions:o,getters:i}},"2KZv":function(t,e){},"4J8u":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.tile.inPlace?r("li",{staticClass:"board-grid__tile",style:t.styles,attrs:{order:t.order}}):r("drop",{class:t.tileClasses,style:t.styles,attrs:{order:t.order},on:{dragleave:function(e){t.over=!1},dragover:function(e){t.over=!0},drop:t.handleDrop}})},i=[],n={render:s,staticRenderFns:i};e.a=n},"6OHK":function(t,e,r){"use strict";var s=r("wtEF");e.a=function(t){var e={blank:"Username can't be blank.",short:"Username must have at least 3 characters.",long:"Username is too long (max 20 characters)."};return t||0!==t.length?(s.a.dispatch("removeError",e.blank),t.length<3?(s.a.dispatch("addError",e.short),!1):(s.a.dispatch("removeError",e.short),t.length>20?(s.a.dispatch("addError",e.long),!1):(s.a.dispatch("clearErrors"),!0))):(s.a.dispatch("addError",e.blank),!1)}},"8s5S":function(t,e){},CYOy:function(t,e,r){"use strict";var s=r("aE66");e.a={props:{order:{type:Number,default:0}},data:function(){return{dragging:!1,tileClasses:{"tile-grid__tile":!0,"tile-grid__tile--floating":!0,"tile-grid__tile--invisible":this.dragging}}},components:{Drag:s.Drag},computed:{puzzles:function(){return this.$store.getters.getPuzzles},puzzle:function(){var t=this;return this.puzzles.filter(function(e){return e.order===t.order})[0]},styles:function(){return this.puzzle.styles},dataToTransfer:function(){return{styles:this.styles,order:this.order}}}}},Ck50:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("drag",{directives:[{name:"show",rawName:"v-show",value:!t.dragging,expression:"!dragging"}],staticClass:"tile-grid__tile tile-grid__tile--floating",style:t.styles,attrs:{transferData:t.dataToTransfer,order:t.order},on:{dragstart:function(e){t.dragging=!0},dragend:function(e){t.dragging=!1}}})},i=[],n={render:s,staticRenderFns:i};e.a=n},DKO7:function(t,e){},EssR:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",{staticClass:"score-popup__information"},[t._v("\n    High scores\n  ")]),t._v(" "),r("high-scores-table"),t._v(" "),r("div",{staticClass:"score-popup__actions"},[r("button",{staticClass:"score-popup__action-button score-popup__action-button--red-button",on:{click:t.restartGame}},[t._v("\n      Play again\n    ")])])],1)},i=[],n={render:s,staticRenderFns:i};e.a=n},GGBX:function(t,e,r){"use strict";function s(t){r("PhA6")}var i=r("Y7qh"),n=r("UuMK"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},HBMg:function(t,e,r){"use strict";var s={startTime:0,endTime:0},i={getStartTime:function(t){return t.startTime},getEndTime:function(t){return t.endTime}},n={markStartTime:function(t,e){t.startTime=e},markEndTime:function(t,e){t.endTime=e},clearTimers:function(t){t.startTime=0,t.endTime=0}},o={markStartTime:function(t,e){(0,t.commit)("markStartTime",e)},markEndTime:function(t,e){(0,t.commit)("markEndTime",e)},clearTimers:function(t){(0,t.commit)("clearTimers")}};e.a={state:s,mutations:n,actions:o,getters:i}},Ho4Q:function(t,e,r){"use strict";function s(t){r("8s5S")}var i=r("qe+H"),n=r("ORmr"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},I7NB:function(t,e,r){"use strict";var s={errorsList:{}},i={getErrors:function(t){return t.errorsList}},n={addError:function(t,e){t.errorsList&&!t.errorsList.length&&(t.errorsList=[]),-1===t.errorsList.indexOf(e)&&t.errorsList.push(e)},removeError:function(t,e){t.errorsList&&t.errorsList.length&&(t.errorsList=t.errorsList.filter(function(t){return t!==e}))},clearErrors:function(t){t.errorsList=[]}},o={addError:function(t,e){(0,t.commit)("addError",e)},removeError:function(t,e){(0,t.commit)("removeError",e)},clearErrors:function(t){(0,t.commit)("clearErrors")}};e.a={state:s,mutations:n,actions:o,getters:i}},JgTP:function(t,e,r){"use strict";function s(t){r("qriA")}var i=r("kp7V"),n=r("VVvB"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},"K/Js":function(t,e,r){"use strict";var s=r("GGBX"),i=r("Ho4Q"),n=r("krX5");e.a={mixins:[n.a],mounted:function(){this.prepareGame()},components:{"board-grid":s.a,"puzzle-grid":i.a}}},LlPa:function(t,e,r){"use strict";var s=r("6OHK");e.a={computed:{userName:{get:function(){return this.$store.getters.getUserName},set:function(t){this.$store.dispatch("updateUserName",t)}},errorsList:function(){return this.$store.getters.getErrors},hasErrors:function(){return this.errorsList&&this.errorsList.length},inputClass:function(){var t={};return t[this.inputClassName]=!0,t[this.inputErrorClassName]=this.hasErrors,t},inputError:function(){return!!this.hasErrors&&this.errorsList[0]}},data:function(){return{errors:{},inputClassName:"login__text-input",inputErrorClassName:"login__text-input--has-errors"}},methods:{submitLoginForm:function(t){if(t.preventDefault(),Object(s.a)(this.userName)){var e=new Date;this.$store.dispatch("markStartTime",e),this.$store.dispatch("closePopup")}}}}},M93x:function(t,e,r){"use strict";function s(t){r("aafT")}var i=r("xJD8"),n=r("xK+0"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),i=r("aE66"),n=r("M93x"),o=r("wtEF");s.a.config.productionTip=!1,s.a.use(i.default),new s.a({el:"#app",store:o.a,template:"<App/>",components:{App:n.a}})},ORmr:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"puzzle-grid"},t._l(t.puzzles,function(t){return r("puzzle-tile",{key:t.order,attrs:{order:t.order}})}))},i=[],n={render:s,staticRenderFns:i};e.a=n},PhA6:function(t,e){},UVgw:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game-wrapper"},[r("board-grid"),t._v(" "),r("puzzle-grid")],1)},i=[],n={render:s,staticRenderFns:i};e.a=n},"UW+i":function(t,e){},UuMK:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"board-grid"},t._l(t.tiles,function(t){return r("board-tile",{key:t.order,attrs:{order:t.order}})}))},i=[],n={render:s,staticRenderFns:i};e.a=n},UuRC:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{staticClass:"login__form"},[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.userName,expression:"userName",modifiers:{lazy:!0}}],class:t.inputClass,attrs:{type:"text",name:"login-input",placeholder:"Your nickname"},domProps:{value:t.userName},on:{change:function(e){t.userName=e.target.value}}}),t._v(" "),r("button",{staticClass:"login__submit-button",on:{click:t.submitLoginForm}},[t._v("\n      Start\n    ")]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.hasErrors,expression:"hasErrors"}],staticClass:"login__form-error"},[t._v("\n      "+t._s(t.inputError)+"\n    ")])])])},i=[],n={render:s,staticRenderFns:i};e.a=n},VVvB:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"game"},[r("h1",{staticClass:"game__heading"},[t._v("\n      Puzzle Game\n    ")]),t._v(" "),r("game-wrapper")],1),t._v(" "),t.gameStarted?t._e():r("popup-wrapper",{attrs:{"window-name":t.loginPopupName,showWindow:t.showLoginWindow,closeable:!1}},[r("popup-login")],1),t._v(" "),t.gameFinished?r("popup-wrapper",{attrs:{"window-name":t.scorePopupName,showWindow:t.gameFinished,closeable:!1}},[r("popup-user-score")],1):t._e()],1)},i=[],n={render:s,staticRenderFns:i};e.a=n},WSoh:function(t,e,r){"use strict";var s=r("Dd8w"),i=r.n(s),n=r("aE66");e.a={props:{order:{type:Number,default:0}},data:function(){return{over:!1}},methods:{handleDrop:function(t){this.over=!1,t.order===this.order&&this.addSolvedPuzzle(t)},removePuzzle:function(t){return this.$store.dispatch("removePuzzle",t)},addSolvedPuzzle:function(t){var e=this,r=i()({},this.tile);r.styles=t.styles,r.inPlace=!0,this.tile=r,this.removePuzzle(t.order).then(function(){return e.tryFinishGame()})},tryFinishGame:function(){if(0===this.puzzleLeft){var t=new Date;this.$store.dispatch("markEndTime",t),this.$store.dispatch("updateUserScoreVisibility",!0)}}},computed:{tiles:function(){return this.$store.getters.getTiles},tile:{get:function(){return this.tiles[this.order]},set:function(t){this.$store.dispatch("updateTile",t)}},styles:function(){return this.tiles[this.order].styles},tileClasses:function(){return{"board-grid__tile":!0,"board-grid__tile--over":this.over}},puzzles:function(){return this.$store.getters.getPuzzles},puzzleLeft:function(){return this.puzzles.length}},components:{Drop:n.Drop}}},WhqG:function(t,e){},XtlY:function(t,e,r){"use strict";var s=r("//Fk"),i=r.n(s),n={puzzle:[]},o={getPuzzles:function(t){return t.puzzle}},a={setPuzzles:function(t,e){t.puzzle=e},pushPuzzle:function(t,e){t.puzzle.push(e)},updatePuzzle:function(t,e){t.puzzle.splice(e.order,1,e)},removePuzzle:function(t,e){var r=t.puzzle.findIndex(function(t){return t.order===e});t.puzzle.splice(r,1)}},u={setPuzzles:function(t,e){(0,t.commit)("setPuzzles",e)},pushPuzzle:function(t,e){(0,t.commit)("pushPuzzle",e)},updatePuzzle:function(t,e){(0,t.commit)("updatePuzzle",e)},removePuzzle:function(t,e){var r=t.commit;return new i.a(function(t){r("removePuzzle",e),t()})}};e.a={state:n,mutations:a,actions:u,getters:o}},Y7qh:function(t,e,r){"use strict";var s=r("jHKk");e.a={computed:{tiles:function(){return this.$store.getters.getTiles}},components:{"board-tile":s.a}}},ZWEe:function(t,e,r){"use strict";e.a={computed:{highScores:function(){return this.$store.getters.getHighScore}}}},ZYpH:function(t,e){},aafT:function(t,e){},b6jE:function(t,e,r){"use strict";function s(t){r("wIIO")}var i=r("CYOy"),n=r("Ck50"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},bPuN:function(t,e,r){"use strict";function s(t){r("UW+i")}var i=r("khZy"),n=r("zU3g"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},buVs:function(t,e,r){"use strict";var s=r("wy5i"),i=r("krX5");e.a={mixins:[i.a],computed:{username:function(){return this.$store.getters.getUserName},score:function(){var t=this.$store.getters.getStartTime;return this.$store.getters.getEndTime-t}},methods:{restartGame:function(){this.$store.dispatch("clearTimers"),this.prepareGame();var t=new Date;this.$store.dispatch("markStartTime",t)}},components:{"high-scores-table":s.a}}},deLR:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",{staticClass:"score-popup__information"},[t._v("\n    Congratulations\n    "),r("span",{staticClass:"score-popup__information--bold-text score-popup__information--red-text"},[t._v("\n      "+t._s(t.username)+"\n    ")]),t._v("\n    !\n    "),r("br"),t._v("\n    Your score is:\n    "),r("span",{staticClass:"score-popup__information--bold-text score-popup__information--green-text"},[t._v("\n      "+t._s(t.score)+"\n    ")])]),t._v(" "),r("div",{staticClass:"score-popup__actions"},[r("button",{staticClass:"score-popup__action-button score-popup__action-button--red-button",on:{click:t.restartGame}},[t._v("\n      Play again\n    ")]),t._v(" "),r("button",{staticClass:"score-popup__action-button score-popup__action-button--green-button",on:{click:t.saveScore}},[t._v("\n      Save score\n    ")])])])},i=[],n={render:s,staticRenderFns:i};e.a=n},fCbw:function(t,e,r){"use strict";var s=r("Dd8w"),i=r.n(s),n=r("NYxO");e.a={props:{windowName:{type:String,default:"Default window"},closeable:{type:Boolean,default:!0},showWindow:{type:Boolean,default:!1}},methods:i()({},Object(n.b)({closePopup:"closePopup"}))}},gBUJ:function(t,e,r){"use strict";function s(t){r("rFZn")}var i=r("K/Js"),n=r("UVgw"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},gId9:function(t,e,r){"use strict";var s={tiles:[]},i={getTiles:function(t){return t.tiles}},n={setTiles:function(t,e){t.tiles=e},pushTile:function(t,e){t.tiles.push(e)},updateTile:function(t,e){t.tiles.splice(e.order,1,e)}},o={setTiles:function(t,e){(0,t.commit)("setTiles",e)},pushTile:function(t,e){(0,t.commit)("pushTile",e)},updateTile:function(t,e){(0,t.commit)("updateTile",e)}};e.a={state:s,mutations:n,actions:o,getters:i}},jHKk:function(t,e,r){"use strict";function s(t){r("WhqG")}var i=r("WSoh"),n=r("4J8u"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},kfLN:function(t,e,r){"use strict";function s(t){r("kmYH")}var i=r("fCbw"),n=r("qNMb"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},khZy:function(t,e,r){"use strict";var s=r("km7O"),i=r("ymZZ");e.a={components:{"user-score":s.a,"high-scores":i.a},computed:{userScoreVisibility:function(){return this.$store.getters.checkUserScoreVisibility}}}},km7O:function(t,e,r){"use strict";function s(t){r("2KZv")}var i=r("mZ0G"),n=r("deLR"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},kmYH:function(t,e){},kp7V:function(t,e,r){"use strict";var s=r("gBUJ"),i=r("kfLN"),n=r("wc0O"),o=r("bPuN");e.a={name:"GameWrapper",data:function(){return{loginPopupName:"Logging in",scorePopupName:"Your score"}},computed:{showLoginWindow:function(){return this.$store.getters.getLoginPopupState},gameStarted:function(){return 0!==this.$store.getters.getStartTime},gameFinished:function(){return this.gameStarted&&0!==this.$store.getters.getEndTime}},components:{"game-wrapper":s.a,"popup-wrapper":i.a,"popup-login":n.a,"popup-user-score":o.a}}},krX5:function(t,e,r){"use strict";var s=r("pWJ4"),i=r.n(s);e.a={data:function(){return{image:null,tileSize:130}},computed:{gameStarted:function(){return this.$store.getters.getStartTime},tiles:{get:function(){return this.$store.getters.getTiles||[]},set:function(t){this.$store.dispatch("setTiles",t)}},puzzles:{get:function(){return this.$store.getters.getPuzzles},set:function(t){this.$store.dispatch("pushPuzzle",t)}}},methods:{prepareGame:function(){var t=this;this.cleanBoards();var e=new Image;e.onload=function(){t.generatePuzzleTiles(),t.shuffleTiles()},e.src=i.a},generatePuzzleTiles:function(){for(var t=[],e=0;e<9;e+=1)t.push({inPlace:!0,order:e,styles:{background:"url("+i.a+") no-repeat",backgroundPositionX:"-"+e%3*this.tileSize+"px",backgroundPositionY:"-"+Math.floor(e/3)*this.tileSize+"px",height:this.tileSize+"px",width:this.tileSize+"px"}});this.tiles=t},shuffleTiles:function(){var t=this,e=1,r=Math.floor(8*Math.random())+0;this.tiles=this.tiles.map(function(s,n){var o=s,a=n===r||Math.random()<.7,u=Math.floor(325*Math.random())+1,c=Math.floor(150*Math.random())+1;if(a){var l={inPlace:!0,order:s.order,styles:{background:"url("+i.a+") no-repeat",backgroundPositionX:s.styles.backgroundPositionX,backgroundPositionY:s.styles.backgroundPositionY,height:t.tileSize+"px",left:u+"px",top:c+"px",width:t.tileSize+"px",zIndex:e}};e+=1,t.puzzles.push(l),delete o.styles.backgroundPositionX,delete o.styles.backgroundPositionY,o.styles.background="#35495e",o.inPlace=!1}return o})},cleanBoards:function(){this.$store.dispatch("setTiles",[]),this.$store.dispatch("setPuzzles",[])}}}},mZ0G:function(t,e,r){"use strict";var s=r("mtWM"),i=r.n(s),n=r("krX5");e.a={mixins:[n.a],data:function(){return{highScores:[]}},computed:{username:function(){return this.$store.getters.getUserName},score:function(){var t=this.$store.getters.getStartTime;return this.$store.getters.getEndTime-t}},methods:{restartGame:function(){this.$store.dispatch("clearTimers"),this.prepareGame();var t=new Date;this.$store.dispatch("markStartTime",t)},saveScore:function(){var t=this;i.a.post("http://localhost:3000/scores",{user:this.username,score:this.score}).then(function(){t.updateHighScores()})},updateHighScores:function(){var t=this;return i.a.get("http://localhost:3000/scores?_sort=score&_order=asc&_limit=10").then(function(e){t.$store.dispatch("updateHighScore",e.data),t.$store.dispatch("updateUserScoreVisibility",!1)})}}}},pWJ4:function(t,e,r){t.exports=r.p+"static/img/image.de181a1.jpg"},prje:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"high-score-table"},t._l(t.highScores,function(e){return r("tr",{key:e.id,staticClass:"high-score-table__row"},[r("td",{staticClass:"high-score-table__cell"},[t._v(t._s(e.user))]),t._v(" "),r("td",[t._v(t._s(e.score))])])}))},i=[],n={render:s,staticRenderFns:i};e.a=n},qNMb:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showWindow?r("div",{staticClass:"popup"},[r("div",{staticClass:"popup__window"},[r("div",{staticClass:"popup__title-bar"},[r("h2",{staticClass:"popup__window-name"},[t._v(t._s(t.windowName))]),t._v(" "),t.closeable?r("span",{staticClass:"popup__close-icon",on:{click:t.closePopup}},[t._v("\n        x\n      ")]):t._e()]),t._v(" "),r("div",{staticClass:"popup__content-wrapper"},[t._t("default")],2)])]):t._e()},i=[],n={render:s,staticRenderFns:i};e.a=n},qdTs:function(t,e){},"qe+H":function(t,e,r){"use strict";var s=r("b6jE");e.a={computed:{puzzles:function(){return this.$store.getters.getPuzzles}},components:{"puzzle-tile":s.a}}},qriA:function(t,e){},rFZn:function(t,e){},u4eD:function(t,e,r){"use strict";var s={userScoreVisibility:!1,highScores:[]},i={checkUserScoreVisibility:function(t){return t.userScoreVisibility},getHighScore:function(t){return t.highScores}},n={updateUserScoreVisibility:function(t,e){t.userScoreVisibility=e},updateHighScore:function(t,e){t.highScores=e}},o={updateUserScoreVisibility:function(t,e){(0,t.commit)("updateUserScoreVisibility",e)},updateHighScore:function(t,e){(0,t.commit)("updateHighScore",e)}};e.a={state:s,getters:i,mutations:n,actions:o}},wIIO:function(t,e){},wc0O:function(t,e,r){"use strict";function s(t){r("qdTs")}var i=r("LlPa"),n=r("UuRC"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},wtEF:function(t,e,r){"use strict";var s=r("7+uW"),i=r("NYxO"),n=r("1GO+"),o=r("I7NB"),a=r("HBMg"),u=r("gId9"),c=r("XtlY"),l=r("u4eD");s.a.use(i.a),e.a=new i.a.Store({modules:{loginPopup:n.a,errors:o.a,timer:a.a,board:u.a,puzzle:c.a,score:l.a}})},wy5i:function(t,e,r){"use strict";function s(t){r("ZYpH")}var i=r("ZWEe"),n=r("prje"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,"data-v-2e4fe783",null);e.a=u.exports},xJD8:function(t,e,r){"use strict";var s=r("JgTP");e.a={name:"app",components:{"main-wrapper":s.a}}},"xK+0":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("main-wrapper")],1)},i=[],n={render:s,staticRenderFns:i};e.a=n},ymZZ:function(t,e,r){"use strict";function s(t){r("DKO7")}var i=r("buVs"),n=r("EssR"),o=r("VU/8"),a=s,u=o(i.a,n.a,!1,a,null,null);e.a=u.exports},zU3g:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.userScoreVisibility?r("user-score"):t._e(),t._v(" "),t.userScoreVisibility?t._e():r("high-scores")],1)},i=[],n={render:s,staticRenderFns:i};e.a=n}},["NHnr"]);
//# sourceMappingURL=app.f7bc818eb073224bf953.js.map